z{% extends "./layout.html" %}

{% block title %}{% parent %} &raquo; Tags{% endblock %}

{% block content %}
<h1 id="tags">Tags</h1>

{% for fn in functions %}
  {% if fn.access !== "private" %}
  <section id="{{ fn.name }}" class="doc">
    <h2>{{ fn.name }}</h2>

    <p>{{ fn.description|replace('\n', '</p><p>')|raw }}</p>

    {% if fn.parameters.length %}
    <h3>Parameters</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Optional</th>
          <th>Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
      {% for param in fn.parameters %}
        <tr>
          <td><var data-language="js">{{ param.name }}</var></td>
          <td><code data-language="js">{{ param.type|join(" or ") }}</code></td>
          <td>{% if param.optional %}âœ”{% endif %}</td>
          <td><code data-language="js">{{ param.default }}</code></td>
          <td>{{ param.description|raw }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    {% endif %}

    {% if fn.returns %}
    <h3>Returns</h3>
      <p><samp data-language="js">{{ fn.returns.type }}</samp>: {{ fn.returns.description|raw }}</p>
    {% endif %}

    {% if fn.examples.length %}
    <h3>Examples</h3>
    {% for example in fn.examples %}
    <pre><code data-language="swig">{{ example }}</code></pre>
    {% endfor %}
    {% endif %}
  </section>
  {% endif %}
{% endfor %}

<section id="custom">
  <h1>Custom Tags</h1>

  <p>Swig can be extended to handle custom tags that will perform operations on full blocks of your templates. Use <a href="/docs/api/#addTag"><code data-language="js">swig.addTag(name, parse, compile, ends)</code></a> to add your custom tag.</p>

  <p>All of Swig's tags are written using the same api (with a few exceptions for core modules, like <var>extends</var> and <var>block</var>). View a tag's source to see more examples to write your own custom tags.</p>

  <section id="parse" class="doc">
    <h2>parse(str, line, parser, types, options)</h2>

    <p>Parses tokens within the bounds of the tag control <code data-language>{% raw %}{% tagname [tokens...] %}{% endraw %}</code></p>

    <pre><code data-language="js">exports.parse = function (str, line, parser, types, options) {
  parser.on('start', function () {
    // ...
  });
  parser.on(types.STRING, function (token) {
    // ...
  });
};</code></pre>

    <h3>parser.on(type, callback)</h3>

    <p>Callbacks can be registered for various token types found while parsing</p>

    <h4>Parameters</h4>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><var data-language="js">type</var></td>
          <td><code data-language="js">string or LexerToken</code></td>
          <td>See the list of token types.</td>
        </tr>
        <tr>
          <td><var data-language="js">callback</var></td>
          <td><code data-anguage="js">function</code></td>
          <td>Function to run for the found token.</td>
        </tr>
      </tbody>
    </table>

    <section id="token-types">
      <h3>Tokens Types</h3>

      {% for prop in properties %}
        {% if prop.name === 'TYPES' %}
          <table>
            <thead>
              <tr>
                <th>Value</th>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
            <tr>
              <td><samp data-language="js">'*'</samp></td>
              <td></td>
              <td>For every token, run the given callback.</td>
            </tr>
            <tr>
              <td><samp data-language="js">'start'</samp></td>
              <td></td>
              <td>Run before any token is parsed.</td>
            </tr>
            <tr>
              <td><samp data-language="js">'end'</samp></td>
              <td></td>
              <td>Run after all other tokens have been parsed.</td>
            </tr>
            {% for p in prop.properties %}
            <tr>
              <td><samp data-language="js">{{ p.default }}</samp></td>
              <td><var data-language="js">types.{{ p.name }}</var></td>
              <td>{{ p.description|raw }}</td>
            </tr>
            {% endfor %}
            </tbody>
          </table>
        {% endif %}
      {% endfor %}
    </section>


  </section>

  <section id="compile" class="doc">
    <h2>compile(compiler, args, content, parent, options)</h2>

    <pre><code data-language="js">exports.compile = function (compiler, args, content, parent, options) {
  return '_ouput += ' + args.join('') + ';\\n';
};</code></pre>
  </section>
</section>

{% endblock %}

{% block tagsubnav %}
<ol>
  <li>
    <a href="#tags">Built-In Tags</a>
    <ol>
    {% for fn in functions %}
    {% if fn.access !== "private" %}
      <li>
        <a href="#{{ fn.name }}">{{ fn.name }}</a>
      </li>
    {% endif %}
    {% endfor %}
    </ol>
  </li>
  <li>
    <a href="#custom">Custom Tags</a>
    <ol>
      <li><a href="#parse">parse</a></li>
      <li><a href="#token-types">Token Types</a></li>
      <li><a href="#compile">compile</a></li>
    </ol>
  </li>
</ol>
{% endblock %}
