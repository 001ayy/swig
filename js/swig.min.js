!function(e,t,n){function r(n,i){if(!t[n]){if(!e[n]){var s="function"==typeof require&&require;if(!i&&s)return s(n,!0);if(o)return o(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=t[n]={exports:{}};e[n][0].call(a.exports,function(t){var o=e[n][1][t];return r(o?o:t)},a,a.exports)}return t[n].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e){var t=e("../lib/swig");"function"==typeof window.define&&"object"==typeof window.define.amd?window.define("swig",[],function(){return t}):window.swig=t},{"../lib/swig":6}],2:[function(e,t,n){var r=e("./utils"),o={full:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],alt:{"-1":"Yesterday",0:"Today",1:"Tomorrow"}};n.defaultTZOffset=0,n.DateZ=function(){var e={"default":["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toGMTString","toUTCString","valueOf","getTime"],z:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear","toDateString","toLocaleDateString","toLocaleTimeString"]},t=this;t.date=t.dateZ=arguments.length>1?new Date(Date.UTC.apply(Date,arguments)+6e4*(new Date).getTimezoneOffset()):1===arguments.length?new Date(new Date(arguments["0"])):new Date,t.timezoneOffset=t.dateZ.getTimezoneOffset(),r.each(e.z,function(e){t[e]=function(){return t.dateZ[e]()}}),r.each(e["default"],function(e){t[e]=function(){return t.date[e]()}}),this.setTimezoneOffset(n.defaultTZOffset)},n.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(e){return this.timezoneOffset=e,this.dateZ=new Date(this.date.getTime()+6e4*this.date.getTimezoneOffset()-6e4*this.timezoneOffset),this}},n.d=function(e){return(e.getDate()<10?"0":"")+e.getDate()},n.D=function(e){return i.abbr[e.getDay()]},n.j=function(e){return e.getDate()},n.l=function(e){return i.full[e.getDay()]},n.N=function(e){var t=e.getDay();return t>=1?t+1:7},n.S=function(e){var t=e.getDate();return 1===t%10&&11!==t?"st":2===t%10&&12!==t?"nd":3===t%10&&13!==t?"rd":"th"},n.w=function(e){return e.getDay()},n.z=function(e,t,r){var o=e.getFullYear(),i=new n.DateZ(o,e.getMonth(),e.getDate(),12,0,0),s=new n.DateZ(o,0,1,12,0,0);return i.setTimezoneOffset(t,r),s.setTimezoneOffset(t,r),Math.round((i-s)/864e5)},n.W=function(e){var t,n=new Date(e.valueOf()),r=(e.getDay()+6)%7;return n.setDate(n.getDate()-r+3),t=n.valueOf(),n.setMonth(0,1),4!==n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),1+Math.ceil((t-n)/6048e5)},n.F=function(e){return o.full[e.getMonth()]},n.m=function(e){return(e.getMonth()<9?"0":"")+(e.getMonth()+1)},n.M=function(e){return o.abbr[e.getMonth()]},n.n=function(e){return e.getMonth()+1},n.t=function(e){return 32-new Date(e.getFullYear(),e.getMonth(),32).getDate()},n.L=function(e){return 29===new Date(e.getFullYear(),1,29).getDate()},n.o=function(e){var t=new Date(e.valueOf());return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},n.Y=function(e){return e.getFullYear()},n.y=function(e){return e.getFullYear().toString().substr(2)},n.a=function(e){return e.getHours()<12?"am":"pm"},n.A=function(e){return e.getHours()<12?"AM":"PM"},n.B=function(e){var t,n=e.getUTCHours();return n=23===n?0:n+1,t=Math.abs((60*(60*n+e.getUTCMinutes())+e.getUTCSeconds())/86.4).toFixed(0),"000".concat(t).slice(t.length)},n.g=function(e){var t=e.getHours();return 0===t?12:t>12?t-12:t},n.G=function(e){return e.getHours()},n.h=function(e){var t=e.getHours();return(10>t||t>12&&22>t?"0":"")+(12>t?t:t-12)},n.H=function(e){var t=e.getHours();return(10>t?"0":"")+t},n.i=function(e){var t=e.getMinutes();return(10>t?"0":"")+t},n.s=function(e){var t=e.getSeconds();return(10>t?"0":"")+t},n.O=function(e){var t=e.getTimezoneOffset();return(0>t?"-":"+")+(10>t/60?"0":"")+Math.abs(t/60)+"00"},n.Z=function(e){return 60*e.getTimezoneOffset()},n.c=function(e){return e.toISOString()},n.r=function(e){return e.toUTCString()},n.U=function(e){return e.getTime()/1e3}},{"./utils":23}],3:[function(e,t,n){!function(){var t=e("./utils"),r=e("./dateformatter");n.addslashes=function(e){return"object"==typeof e?(t.each(e,function(t,r){e[r]=n.addslashes(t)}),e):e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},n.capitalize=function(e){return"object"==typeof e?(t.each(e,function(t,r){e[r]=n.capitalize(t)}),e):e.toString().charAt(0).toUpperCase()+e.toString().substr(1).toLowerCase()},n.date=function(e,t,n,o){var i,s=t.length,a=new r.DateZ(e),u=0,c="";for(n&&a.setTimezoneOffset(n,o),u;s>u;u+=1)i=t.charAt(u),c+=r.hasOwnProperty(i)?r[i](a,n,o):i;return c},n.default=function(e,t){return"undefined"==typeof e||!e&&"number"!=typeof e?t:e},n.escape=function(e,t){if("string"!=typeof e)return e;var n,r=0,o="";switch(t){case"js":for(e=e.replace(/\\/g,"\\u005C"),r;r<e.length;r+=1)n=e.charCodeAt(r),32>n?(n=n.toString(16).toUpperCase(),n=n.length<2?"0"+n:n,o+="\\u00"+n):o+=e[r];return o.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B");default:return e.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},n.e=n.escape,n.first=function(e){return"object"!=typeof e||t.isArray(e)?"string"==typeof e?e.substr(0,1):e[0]:""},n.join=function(e,n){if(t.isArray(e))return e.join(n);if("object"==typeof e){var r=[];return t.each(e,function(e){r.push(e)}),r.join(n)}return e},n.json=function(e,t){return JSON.stringify(e,null,t||0)},n.json_encode=n.json,n.last=function(e){return"object"!=typeof e||t.isArray(e)?"string"==typeof e?e.charAt(e.length-1):e[e.length-1]:""},n.lower=function(e){return"object"==typeof e?(t.each(e,function(t,r){e[r]=n.lower(t)}),e):e.toString().toLowerCase()},n.raw=function(e){return e},n.replace=function(e,t,n,r){var o=new RegExp(t,r);return e.replace(o,n)},n.reverse=function(e){return t.isArray(e)?e.reverse():e},n.striptags=function(e){return"object"==typeof e?(t.each(e,function(t,r){e[r]=n.striptags(t)}),e):e.toString().replace(/(<([^>]+)>)/gi,"")},n.title=function(e){return"object"==typeof e?(t.each(e,function(t,r){e[r]=n.title(t)}),e):e.toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},n.uniq=function(e){var n;return e&&t.isArray(e)?(n=[],t.each(e,function(e){-1===n.indexOf(e)&&n.push(e)}),n):""},n.upper=function(e){return"object"==typeof e?(t.each(e,function(t,r){e[r]=n.upper(t)}),e):e.toString().toUpperCase()},n.url_encode=function(e){return encodeURIComponent(e)},n.url_decode=function(e){return decodeURIComponent(e)}}()},{"./dateformatter":2,"./utils":23}],4:[function(e,t,n){function r(e){var t;return o.some(s,function(n){return o.some(n.regex,function(r){var o,i=e.match(r);if(i)return o=i[n.idx||0].replace(/\s*$/,""),o=n.hasOwnProperty("replace")&&n.replace.hasOwnProperty(o)?n.replace[o]:o,t={match:o,type:n.type,length:i[0].length},!0})}),t||(t={match:e,type:i.UNKNOWN,length:e.length}),t}var o=e("./utils"),i=n.types={WHITESPACE:0,STRING:1,FILTER:2,FILTEREMPTY:3,FUNCTION:4,PARENOPEN:5,PARENCLOSE:6,COMMA:7,VAR:8,NUMBER:9,OPERATOR:10,BRACKETOPEN:11,BRACKETCLOSE:12,DOTKEY:13,ARRAYOPEN:14,CURLYOPEN:16,CURLYCLOSE:17,COLON:18,COMPARATOR:19,LOGIC:20,NOT:21,BOOL:22,ASSIGNMENT:23,METHODOPEN:24,UNKNOWN:100},s=[{type:i.WHITESPACE,regex:[/^\s+/]},{type:i.STRING,regex:[/^""/,/^".*?[^\\]"/,/^''/,/^'.*?[^\\]'/]},{type:i.FILTER,regex:[/^\|\s*(\w+)\(/],idx:1},{type:i.FILTEREMPTY,regex:[/^\|\s*(\w+)/],idx:1},{type:i.FUNCTION,regex:[/^\s*(\w+)\(/],idx:1},{type:i.PARENOPEN,regex:[/^\(/]},{type:i.PARENCLOSE,regex:[/^\)/]},{type:i.COMMA,regex:[/^,/]},{type:i.LOGIC,regex:[/^(&&|\|\||and|or)\s*/],idx:1,replace:{and:"&&",or:"||"}},{type:i.COMPARATOR,regex:[/^(===|==|\!==|\!=|<=|<|>=|>|in\s|gte\s|gt\s|lte\s|lt\s)\s*/],idx:1,replace:{gte:">=",gt:">",lte:"<=",lt:"<"}},{type:i.ASSIGNMENT,regex:[/^(=|\+=|-=|\*=|\/=)/]},{type:i.NOT,regex:[/^(not|\!)\s*/],idx:1,replace:{not:"!"}},{type:i.BOOL,regex:[/^(true|false)/]},{type:i.VAR,regex:[/^[a-zA-Z_$]\w*((\.\w*)+)?/,/^[a-zA-Z_$]\w*/]},{type:i.BRACKETOPEN,regex:[/^\[/]},{type:i.BRACKETCLOSE,regex:[/^\]/]},{type:i.CURLYOPEN,regex:[/^\{/]},{type:i.COLON,regex:[/^\:/]},{type:i.CURLYCLOSE,regex:[/^\}/]},{type:i.DOTKEY,regex:[/^\.(\w+)/],idx:1},{type:i.NUMBER,regex:[/^[+\-]?\d+(\.\d+)?/]},{type:i.OPERATOR,regex:[/^(\+|\-|\/|\*|%)/]}];n.read=function(e){for(var t,n,o=0,i=[];o<e.length;)t=e.substring(o),n=r(t),o+=n.length,i.push(n);return i}},{"./utils":23}],5:[function(e,t,n){function r(e){return e.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function o(e,t,n){this.out=[],this.state=[],this.filterApplyIdx=[],this._parsers={},this.line=n,this.filters=t,this.parse=function(){var t=this;return t._parsers.start&&t._parsers.start.call(t),i.each(e,function(n,r){var o=e[r-1];if(t.isLast=r===e.length-1,o)for(;o.type===a.WHITESPACE;)r-=1,o=e[r-1];t.prevToken=o,t.parseToken(n)}),t._parsers.end&&t._parsers.end.call(t),t.out}}var i=e("./utils"),s=e("./lexer"),a=s.types;o.prototype={on:function(e,t){this._parsers[e]=t},parseToken:function(e){var t,n=this,r=n._parsers[e.type]||n._parsers["*"],o=e.match,i=n.prevToken,s=n.state.length?n.state[n.state.length-1]:null;if(!r||"function"!=typeof r||r.call(this,e))switch(s&&s===a.FILTER&&i.type===a.FILTER&&e.type!==a.PARENCLOSE&&e.type!==a.COMMA&&e.type!==a.OPERATOR&&e.type!==a.FILTER&&e.type!==a.FILTEREMPTY&&n.out.push(", "),s&&s===a.METHODOPEN&&(n.state.pop(),e.type!==a.PARENCLOSE&&n.out.push(", ")),e.type){case a.WHITESPACE:break;case a.STRING:n.out.push(o.replace(/\\/g,"\\\\")),n.filterApplyIdx.push(n.out.length-1);break;case a.NUMBER:n.out.push(o),n.filterApplyIdx.push(n.out.length-1);break;case a.FILTER:if(!n.filters.hasOwnProperty(o)||"function"!=typeof n.filters[o])throw new Error('Invalid filter "'+o+'" found on line '+n.line+".");n.out.splice(n.filterApplyIdx[n.filterApplyIdx.length-1],0,'_filters["'+o+'"]('),n.state.push(e.type);break;case a.FILTEREMPTY:if(!n.filters.hasOwnProperty(o)||"function"!=typeof n.filters[o])throw new Error('Invalid filter "'+o+'" found on line '+n.line+".");n.out.splice(n.filterApplyIdx[n.filterApplyIdx.length-1],0,'_filters["'+o+'"]('),n.out.push(")");break;case a.FUNCTION:n.state.push(e.type),n.out.push("((typeof "+o+' !== "undefined") ? '+o+" : ((typeof _ctx."+o+' !== "undefined") ? _ctx.'+o+" : _fn))("),n.filterApplyIdx.push(n.out.length-1);break;case a.PARENOPEN:n.state.push(e.type),n.filterApplyIdx.length?(n.out.splice(n.filterApplyIdx[n.filterApplyIdx.length-1],0,"("),i&&i.type===a.VAR?(t=i.match.split(".").slice(0,-1),n.out.push(" || _fn).call("+n.checkMatch(t)),n.state.push(a.METHODOPEN)):n.out.push(" || _fn)(")):n.out.push("("),n.filterApplyIdx.push(n.out.length-1);break;case a.PARENCLOSE:if(t=n.state.pop(),t!==a.PARENOPEN&&t!==a.FUNCTION&&t!==a.FILTER)throw new Error("Mismatched nesting state on line "+n.line+".");n.out.push(")"),n.filterApplyIdx.pop();break;case a.COMMA:if(s!==a.FUNCTION&&s!==a.FILTER&&s!==a.ARRAYOPEN&&s!==a.CURLYOPEN&&s!==a.PARENOPEN)throw new Error("Unexpected comma on line "+n.line+".");n.out.push(", "),n.filterApplyIdx.pop();break;case a.VAR:n.parseVar(e,o,s,i);break;case a.BRACKETOPEN:!i||i.type!==a.VAR&&i.type!==a.BRACKETCLOSE&&i.type!==a.PARENCLOSE?(n.state.push(a.ARRAYOPEN),n.filterApplyIdx.push(n.out.length)):n.state.push(e.type),n.out.push("[");break;case a.BRACKETCLOSE:if(t=n.state.pop(),t!==a.BRACKETOPEN&&t!==a.ARRAYOPEN)throw new Error("Unexpected closing square bracket on line "+n.line+".");n.out.push("]"),n.filterApplyIdx.pop();break;case a.CURLYOPEN:n.state.push(e.type),n.out.push("{"),n.filterApplyIdx.push(n.out.length-1);break;case a.COLON:if(s!==a.CURLYOPEN)throw new Error("Unexpected colon on line "+n.line+".");n.out.push(":"),n.filterApplyIdx.pop();break;case a.CURLYCLOSE:if(n.state.pop()!==a.CURLYOPEN)throw new Error("Unexpected closing curly brace on line "+n.line+".");n.out.push("}"),n.filterApplyIdx.pop();break;case a.DOTKEY:if(i.type!==a.VAR&&i.type!==a.BRACKETCLOSE&&i.type!==a.DOTKEY)throw new Error('Unexpected key "'+o+'" on line '+n.line+".");n.out.push("."+o);break;case a.OPERATOR:n.out.push(" "+o+" "),n.filterApplyIdx.pop()}},parseVar:function(e,t,n){var r=this;if(t=t.split("."),r.filterApplyIdx.push(r.out.length),n===a.CURLYOPEN){if(t.length>1)throw new Error("Unexpected dot on line "+r.line+".");return r.out.push(t[0]),void 0}r.out.push(r.checkMatch(t))},checkMatch:function(e){function t(t){var n=t+r,o=e,s="";return s="(typeof "+n+' !== "undefined"',i.each(o,function(e,t){0!==t&&(s+=' && "'+e+'" in '+n,n+="."+e)}),s+=")"}function n(n){return"("+t(n)+" ? "+n+e.join(".")+' : "")'}var r=e[0];return"("+t("")+" ? "+n("")+" : "+n("_ctx.")+")"}},n.parse=function(e,t,u,c){function p(e,t){var n,r,u,p=s.read(i.strip(e));if(r=g&&!i.some(p,function(e){return(e.type===a.FILTEREMPTY||e.type===a.FILTER)&&"raw"===e.match}),r&&(p.unshift({type:a.PARENOPEN,match:"("}),p.push({type:a.PARENCLOSE,match:")"}),"string"==typeof g?p=p.concat([{type:a.FILTER,match:"e"},{type:a.STRING,match:String(g)},{type:a.PARENCLOSE,match:")"}]):p.push({type:a.FILTEREMPTY,match:"e"})),n=new o(p,c,t),u=n.parse().join(""),n.state.length)throw new Error('Unable to parse "'+e+'" on line '+t+".");return{compile:function(){return"_output += "+u+";\n"}}}function l(e,n){var r,p,l,f,h,d,m;if(i.startsWith(e,"end")){if(m=M[M.length-1],m&&m.name===e.replace(/^end/,"")&&m.ends){switch(m.name){case"autoescape":g=t.autoescape;break;case"raw":D=!1}return M.pop(),void 0}if(!D)throw new Error('Unexpected end of tag "'+e.replace(/^end/,"")+'" on line '+n+". of "+t.filename)}if(!D){if(l=e.split(/\s+(.+)?/),f=l.shift(),!u.hasOwnProperty(f))throw new Error('Unexpected tag "'+e+'" on line '+n+".");if(r=s.read(i.strip(l.join(" "))),p=new o(r,c,n),h=u[f],!h.parse(l[1],n,p,a,M,t))throw new Error('Unexpected tag "'+f+'" on line '+n+".");switch(p.parse(),d=p.out,f){case"autoescape":g="false"!==d[0]?d[0]:!1;break;case"raw":D=!0}return{compile:h.compile,args:d,content:[],ends:h.ends,name:f}}}function f(e){return"string"==typeof e&&(e=e.replace(/\s*$/,"")),e}e=e.replace(/\r\n/g,"\n");var h,g=t.autoescape,d=t.tagControls[0],m=t.tagControls[1],y=t.varControls[0],w=t.varControls[1],E=r(d),v=r(m),O=r(y),x=r(w),T=new RegExp("^"+E+"-?\\s*-?|-?\\s*-?"+v+"$","g"),A=new RegExp("^"+E+"-"),R=new RegExp("-"+v+"$"),C=new RegExp("^"+O+"-?\\s*-?|-?\\s*-?"+x+"$","g"),N=new RegExp("^"+O+"-"),b=new RegExp("-"+x+"$"),P=t.cmtControls[0],S=t.cmtControls[1],I="[\\s\\S]*?",U=new RegExp("("+E+I+v+"|"+O+I+x+"|"+r(P)+I+r(S)+")"),L=1,M=[],F=null,k=[],_={},D=!1;return n.parseVariable=p,i.each(e.split(U),function(e){var t,n,r,o,s;if(e){if(!D&&i.startsWith(e,y)&&i.endsWith(e,w))r=N.test(e),h=b.test(e),t=p(e.replace(C,""),L);else if(i.startsWith(e,d)&&i.endsWith(e,m)){if(r=A.test(e),h=R.test(e),t=l(e.replace(T,""),L))switch(t.name){case"extends":F=t.args.join("").replace(/^\'|\'$/g,"").replace(/^\"|\"$/g,"");break;case"block":_[t.args.join("")]=t}D&&!t&&(t=e)}else if(D||!i.startsWith(e,P)&&!i.endsWith(e,S))t=h?e.replace(/^\s*/,""):e,h=!1;else if(i.startsWith(e,P)&&i.endsWith(e,S))return;r&&k.length&&(o=k.pop(),"string"==typeof o?o=f(o):o.content&&o.content.length&&(s=f(o.content.pop()),o.content.push(s)),k.push(o)),t&&(M.length?M[M.length-1].content.push(t):k.push(t),t.name&&t.ends&&M.push(t),n=e.match(/\n/g),L+=n?n.length:0)}}),{name:t.filename,parent:F,tokens:k,blocks:_}},n.compile=function(e,t,r,o){var s="",a=i.isArray(e)?e:e.tokens;return i.each(a,function(e){return"string"==typeof e?(s+='_output += "'+e.replace(/\n|\r/g,"\\n").replace(/"/g,'\\"')+'";\n',void 0):(s+=e.compile(n.compile,e.args,e.content,t,r,o),void 0)}),s}},{"./lexer":4,"./utils":23}],6:[function(e,t,n){!function(){function t(){return""}function r(e){if(e&&(a.each(["varControls","tagControls","cmtControls"],function(t){if(e.hasOwnProperty(t)){if(!a.isArray(e[t])||2!==e[t].length)throw new Error('Option "'+t+'" must be an array containing 2 different control strings.');if(e[t][0]===e[t][1])throw new Error('Option "'+t+'" open and close controls must not be the same.');a.each(e[t],function(e,n){if(e.length<2)throw new Error('Option "'+t+'" '+(n?"open ":"close ")+'control must be at least 2 characters. Saw "'+e+'" instead.')})}}),e.hasOwnProperty("cache")&&e.cache&&"memory"!==e.cache&&(!e.cache.get||!e.cache.set)))throw new Error("Invalid cache option "+JSON.stringify(e.cache)+' found. Expected "memory" or { get: function (key) { ... }, set: function (key, value) { ... } }.')}var o,i=e("fs"),s=e("path"),a=e("./utils"),u=e("./tags"),c=e("./filters"),p=e("./parser"),l=e("./dateformatter"),f={autoescape:!0,varControls:["{{","}}"],tagControls:["{%","%}"],cmtControls:["{#","#}"],locals:{},cache:"memory"};n.setDefaults=function(e){r(e);var t=a.extend({},f.locals,e.locals||{});a.extend(f,e),f.locals=t,o.options=a.extend(o.options,e)},n.setDefaultTZOffset=function(e){l.tzOffset=e},n.Swig=function(e){function o(e){return e&&e.locals?a.extend({},m.options.locals,e.locals):m.options.locals}function l(e){return m.options.cache?"memory"===m.options.cache?m.cache[e]:m.options.cache.get(e):void 0}function h(e,t){return m.options.cache?"memory"===m.options.cache?(m.cache[e]=t,void 0):(m.options.cache.set(e,t),void 0):void 0}function g(e,t){return a.map(t,function(t){var n=t.args?t.args.join(""):"";return"block"===t.name&&e[n]&&(t=e[n]),t.content&&t.content.length&&(t.content=g(e,t.content)),t})}function d(e,t){for(var n,r,o={},i=e.parent;i;){if(!t||!t.filename)throw new Error('Cannot extend "'+i+'" because current template has no filename.');n=n||t.filename,n=s.resolve(s.dirname(n),i),r=m.parseFile(n,a.extend({},t,{filename:n})),o=a.extend({},r.blocks,o),r.tokens=g(o,r.tokens),i=r.parent}return r&&(r.blocks=o),r}r(e),this.options=a.extend({},f,e||{}),this.cache={},this.extensions={};var m=this,y=u,w=c;this.invalidateCache=function(){"memory"===m.options.cache&&(m.cache={})},this.setFilter=function(e,t){if("function"!=typeof t)throw new Error('Filter "'+e+'" is not a valid function.');w[e]=t},this.setTag=function(e,t,n,r){if("function"!=typeof t)throw new Error('Tag "'+e+'" parse method is not a valid function.');if("function"!=typeof n)throw new Error('Tag "'+e+'" compile method is not a valid function.');y[e]={parse:t,compile:n,ends:r||!1}},this.setExtension=function(e,t){m.extensions[e]=t},this.parse=function(e,t){r(t);var n,i=o(t),s={};for(n in t)t.hasOwnProperty(n)&&"locals"!==n&&(s[n]=t[n]);return t=a.extend({},m.options,s),t.locals=i,p.parse(e,t,y,w)},this.parseFile=function(e,t){var n;return t||(t={}),e=t.resolveFrom?s.resolve(s.dirname(t.resolveFrom),e):e,n=i.readFileSync(e,"utf8"),t.filename||(t.filename=e),m.parse(n,t)},this.precompile=function(e,t){var n,r,o;return n=m.parse(e,t),o=d(n,t),o&&(n.tokens=g(n.blocks,o.tokens)),r=new Function("_swig","_ctx","_filters","utils","_fn",["  var _ext = _swig.extensions,\n",'    _output = "";',p.compile(n,o,t),"  return _output;"].join("\n  ")),{tpl:r,tokens:n}},this.render=function(e,t){return n.compile(e,t)()},this.renderFile=function(e,t,r){var o;try{if(o=n.compileFile(e)(t),r)return r(null,o),void 0}catch(i){if(r)return r(i),void 0;throw i}return o},this.compile=function(e,n){function r(e){return s.tpl(m,a.extend({},i,e||{}),w,a,t)}var i,s,u=n?n.filename:null,c=u?l(u):null;return c?c:(i=o(n),s=this.precompile(e,n),a.extend(r,s.tokens),u&&h(u,r),r)},this.compileFile=function(e,t){var n,r;return t||(t={}),e=t.resolveFrom?s.resolve(s.dirname(t.resolveFrom),e):e,t.filename||(t.filename=e),(r=l(e))?r:(n=i.readFileSync(e,"utf8"),m.compile(n,t))},this.run=function(e,n){var r=o({locals:n});return e(m,r,w,a,t)}},o=new n.Swig,n.setFilter=o.setFilter,n.setTag=o.setTag,n.setExtension=o.setExtension,n.parseFile=o.parseFile,n.precompile=o.precompile,n.compile=o.compile,n.compileFile=o.compileFile,n.render=o.render,n.renderFile=o.renderFile,n.run=o.run,n.invalidateCache=o.invalidateCache}()},{"./dateformatter":2,"./filters":3,"./parser":5,"./tags":7,"./utils":23,fs:24,path:25}],7:[function(e,t,n){n.autoescape=e("./tags/autoescape"),n.block=e("./tags/block"),n.else=e("./tags/else"),n.elseif=e("./tags/elseif"),n.elif=n.elseif,n.extends=e("./tags/extends"),n.filter=e("./tags/filter"),n.for=e("./tags/for"),n.if=e("./tags/if"),n.import=e("./tags/import"),n.include=e("./tags/include"),n.macro=e("./tags/macro"),n.parent=e("./tags/parent"),n.raw=e("./tags/raw"),n.set=e("./tags/set"),n.spaceless=e("./tags/spaceless")},{"./tags/autoescape":8,"./tags/block":9,"./tags/else":10,"./tags/elseif":11,"./tags/extends":12,"./tags/filter":13,"./tags/for":14,"./tags/if":15,"./tags/import":16,"./tags/include":17,"./tags/macro":18,"./tags/parent":19,"./tags/raw":20,"./tags/set":21,"./tags/spaceless":22}],8:[function(e,t,n){var r=["html","js"];n.compile=function(e,t,n){return e(n)},n.parse=function(e,t,n,o){var i;return n.on("*",function(e){if(e.type!==o.WHITESPACE){if(!i&&(e.type===o.BOOL||e.type===o.STRING&&-1===r.indexOf(e.match)))return this.out.push(e.match),i=!0,void 0;throw new Error('Unexpected token "'+e.match+'" in autoescape tag on line '+t+".")}}),!0},n.ends=!0},{}],9:[function(e,t,n){n.compile=function(e,t,n,r,o){return e(n,r,o,t.join(""))},n.parse=function(e,t,n){return n.on("*",function(e){this.out.push(e.match)}),!0},n.ends=!0},{}],10:[function(e,t,n){n.compile=function(){return"} else {\n"},n.parse=function(e,t,n,r,o){return n.on("*",function(e){throw new Error('"else" tag does not accept any tokens. Found "'+e.match+'" on line '+t+".")}),o.length&&"if"===o[o.length-1].name}},{}],11:[function(e,t,n){var r=e("./if").parse;n.compile=function(e,t){return"} else if ("+t.join(" ")+") {\n"},n.parse=function(e,t,n,o,i){var s=r(e,t,n,o,i);return s&&i.length&&"if"===i[i.length-1].name}},{"./if":15}],12:[function(e,t,n){n.compile=function(){},n.parse=function(){return!0},n.ends=!1},{}],13:[function(e,t,n){var r=e("../filters");n.compile=function(e,t,n,r,o){var i=t.shift().replace(/\($/,""),s='(function () {\n  var _output = "";\n'+e(n,r,o)+"  return _output;\n"+"})()";return")"===t[t.length-1]&&t.pop(),t=t.length?", "+t.join(""):"",'_output += _filters["'+i+'"]('+s+t+");\n"},n.parse=function(e,t,n,o){function i(e){if(!r.hasOwnProperty(e))throw new Error('Filter "'+e+'" does not exist on line '+t+".")}var s;return n.on(o.FUNCTION,function(e){return s?!0:(s=e.match.replace(/\($/,""),i(s),this.out.push(e.match),this.state.push(e.type),void 0)}),n.on(o.VAR,function(e){return s?!0:(s=e.match,i(s),this.out.push(s),void 0)}),!0},n.ends=!0},{"../filters":3}],14:[function(e,t,n){n.compile=function(e,t,n){var r,o=t.shift(),i="__k";return t[0]&&","===t[0]&&(t.shift(),i=t.shift()),r=t.join(""),["(function () {\n","  var __l = "+r+";\n","  if (!__l) { return; }\n","  var loop = { first: false, index: 1, index0: 0, revindex: __l.length, revindex0: __l.length - 1, length: __l.length, last: false };\n","  utils.each(__l, function ("+o+", "+i+") {\n","    loop.key = "+i+";\n","    loop.first = (loop.index0 === 0);\n","    loop.last = (loop.revindex0 === 0);\n","    "+e(n),"    loop.index += 1; loop.index0 += 1; loop.revindex -= 1; loop.revindex0 -= 1;\n","  });\n","})();\n"].join("")},n.parse=function(e,t,n,r){var o,i;return n.on(r.NUMBER,function(e){var n=this.state.length?this.state[this.state.length-1]:null;if(!i||n!==r.ARRAYOPEN&&n!==r.CURLYOPEN&&n!==r.CURLYCLOSE&&n!==r.FUNCTION&&n!==r.FILTER)throw new Error('Unexpected number "'+e.match+'" on line '+t+".");return!0}),n.on(r.VAR,function(e){return i&&o?!0:(this.out.length||(o=!0),this.out.push(e.match),void 0)}),n.on(r.COMMA,function(e){return o&&this.prevToken.type===r.VAR?(this.out.push(e.match),void 0):!0}),n.on(r.COMPARATOR,function(e){if("in"!==e.match||!o)throw new Error('Unexpected token "'+e.match+'" on line '+t+".");i=!0}),!0},n.ends=!0},{}],15:[function(e,t,n){n.compile=function(e,t,n){return"if ("+t.join(" ")+") { \n"+e(n)+"\n"+"}"},n.parse=function(e,t,n,r){return n.on(r.COMPARATOR,function(e){if(this.isLast)throw new Error('Unexpected logic "'+e.match+'" on line '+t+".");if(this.prevToken.type===r.NOT)throw new Error('Attempted logic "not '+e.match+'" on line '+t+". Use !(foo "+e.match+") instead.");this.out.push(e.match)}),n.on(r.NOT,function(e){if(this.isLast)throw new Error('Unexpected logic "'+e.match+'" on line '+t+".");this.out.push(e.match)}),n.on(r.BOOL,function(e){this.out.push(e.match)}),n.on(r.LOGIC,function(e){if(!this.out.length||this.isLast)throw new Error('Unexpected logic "'+e.match+'" on line '+t+".");this.out.push(e.match),this.filterApplyIdx.pop()}),!0},n.ends=!0},{}],16:[function(e,t,n){!function(){var t=e("../utils");n.compile=function(n,r,o,i,s){var a,u=r.shift(),c=e("../swig").parseFile,p=r.shift(),l=r.shift(),f="var "+l+" = {};\n"+"(function () {\n"+'  var _output = "";\n';return a=c(p.replace(/^("|')|("|')$/g,""),{resolveFrom:s.filename}).tokens,t.each(a,function(e){e&&"macro"===e.name&&e.compile&&(f+=l+"."+e.args[0]+" = "+e.compile(n,e.args,e.content,i,t.extend({},s,{resolveFrom:u})))}),f+="})();\n"},n.parse=function(e,t,n,r,o,i){var s,a;return n.on(r.STRING,function(e){if(!s)return s=e.match,this.out.push(s),void 0;throw new Error("Unexpected string "+e.match+" on line "+t+".")}),n.on(r.VAR,function(e){if(!s||a)throw new Error('Unexpected variable "'+e.match+'" on line '+t+".");if("as"!==e.match)return a=e.match,this.out.push(a),!1}),n.on("start",function(){this.out.push(i.filename)}),!0}}()},{"../swig":6,"../utils":23}],17:[function(e,t,n){var r="ignore",o="missing";n.compile=function(e,t){var n=t.shift(),r=t.pop(),i=t[t.length-1]===o?t.pop():!1,s=t.join("");return"(function () {\n"+(i?"  try {\n":"")+"    _output += _swig.compileFile("+n+", {"+'resolveFrom: "'+r+'"'+"})("+(s||"_ctx")+");\n"+(i?"} catch (e) {}\n":"")+"})();\n"},n.parse=function(e,t,n,i,s,a){var u,c;return n.on(i.STRING,function(e){return u?!0:(u=e.match,this.out.push(u),void 0)}),n.on(i.VAR,function(e){if(!u)return u=e.match,!0;if(!c&&"with"===e.match)return c=!0,void 0;if(e.match===r)return!1;if(e.match===o){if(this.prevToken.match!==r)throw new Error('Unexpected token "'+o+'" on line '+t+".");return this.out.push(e.match),!1}if(this.prevToken.match===r)throw new Error('Expected "'+o+'" on line '+t+' but found "'+e.match+'".');return!0}),n.on("end",function(){this.out.push(a.filename)}),!0}},{}],18:[function(e,t,n){n.compile=function(e,t,n){var r=t.shift();return"function "+r+"("+t.join("")+") {\n"+'  var _output = "";\n'+e(n)+"\n"+"  return _output;\n"+"}\n"},n.parse=function(e,t,n,r){var o;return n.on(r.VAR,function(e){if(-1!==e.match.indexOf("."))throw new Error('Unexpected dot in macro argument "'+e.match+'" on line '+t+".");this.out.push(e.match)}),n.on(r.FUNCTION,function(e){o||(o=e.match,this.out.push(o),this.state.push(r.FUNCTION))}),n.on(r.PARENCLOSE,function(){if(!this.isLast)throw new Error("Unexpected parenthesis close on line "+t+".")}),n.on(r.COMMA,function(){return!0}),n.on("*",function(){}),!0},n.ends=!0},{}],19:[function(e,t,n){n.compile=function(e,t,n,r,o,i){if(!r||!r.blocks||!r.blocks.hasOwnProperty(i))return"";var s=r.blocks[i];return s.compile(e,[],s.content,null,o)+"\n"},n.parse=function(e,t,n){return n.on("*",function(e){throw new Error('Unexpected argument "'+e.match+'" on line '+t+".")}),!0}},{}],20:[function(e,t,n){n.compile=function(e,t,n){return e(n)},n.parse=function(e,t,n){return n.on("*",function(e){throw new Error('Unexpected token "'+e.match+'" in raw tag on line '+t+".")}),!0},n.ends=!0},{}],21:[function(e,t,n){!function(){n.compile=function(e,t){return t.join(" ")+";\n"},n.parse=function(e,t,n,r){var o;return n.on(r.VAR,function(e){return this.out.length?!0:(o=e.match,this.out.push("var "+o+" = _ctx."+o+";\n"+o),void 0)}),n.on(r.ASSIGNMENT,function(e){if(1!==this.out.length||!o)throw new Error('Unexpected assignment "'+e.match+'" on line '+t+".");this.out.push(e.match)}),!0}}()},{}],22:[function(e,t,n){var r=e("../utils");n.compile=function(e,t,n,o,i){function s(e){return r.map(e,function(e){return e.content?(e.content=s(e.content),e):e.replace(/^\s+/,"").replace(/>\s+</g,"><").replace(/\s+$/,"")})}return e(s(n),o,i)},n.parse=function(e,t,n){return n.on("*",function(e){throw new Error('Unexpected token "'+e.match+'" on line '+t+".")}),!0},n.ends=!0},{"../utils":23}],23:[function(e,t,n){var r;n.strip=function(e){return e.replace(/^\s+|\s+$/g,"")},n.startsWith=function(e,t){return 0===e.indexOf(t)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.each=function(e,t){var n,o;if(r(e))for(n=0,o=e.length,n;o>n&&t(e[n],n,e)!==!1;n+=1);else for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n,e)===!1)break;return e},n.isArray=r=Array.hasOwnProperty("isArray")?Array.isArray:function(e){return e?"object"==typeof e&&-1!==Object.prototype.toString.call(e).indexOf():!1},n.some=function(e,t){var o,i,s=0;if(r(e))for(i=e.length,s;i>s&&!(o=t(e[s],s,e));s+=1);else n.each(e,function(n,r){return o=t(n,r,e),!o});return!!o},n.map=function(e,t){var n,o=0,i=[];if(r(e))for(n=e.length,o;n>o;o+=1)i[o]=t(e[o],o);else for(o in e)e.hasOwnProperty(o)&&(i[o]=t(e[o],o));return i},n.extend=function(){var e,t,n=arguments,r=n[0],o=n.length>1?Array.prototype.slice.call(n,1):[],i=0,s=o.length;for(i;s>i;i+=1){t=o[i]||{};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e])}return r}},{}],24:[function(){},{}],25:[function(e,t,n){!function(e){function t(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function r(e,t){for(var n=0,r=e.length;r>=0;r--){var o=e[r];"."==o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var o=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){for(var n="",o=!1,i=arguments.length;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();"string"==typeof s&&s&&(n=s+"/"+n,o="/"===s.charAt(0))}return n=r(t(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var n="/"===e.charAt(0),o="/"===e.slice(-1);return e=r(t(e.split("/"),function(e){return!!e}),!n).join("/"),e||n||(e="."),e&&o&&(e+="/"),(n?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(t(e,function(e){return e&&"string"==typeof e}).join("/"))},n.dirname=function(e){var t=o.exec(e)[1]||"",n=!1;return t?1===t.length||n&&t.length<=3&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=o.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o.exec(e)[3]||""},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),s=Math.min(o.length,i.length),a=s,u=0;s>u;u++)if(o[u]!==i[u]){a=u;break}for(var c=[],u=a;u<o.length;u++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")}}(e("__browserify_process"))},{__browserify_process:26}],26:[function(e,t){var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var t=n.shift();t()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[1]);
//# sourceMappingURL=dist/swig.js.map